---
layout: post
category: æŠ€æœ¯
title: Yii2.0 GridView æ‰¹é‡é€‰æ‹©
---
å¤§æ¦‚è¦å®ç°ä¸‹é¢çš„å›¾çš„æ•ˆæœ,æ‰¹é‡é€šè¿‡å’Œæ‰¹é‡æ‹’ç»

![å¦‚](http://oi2atwmcz.bkt.clouddn.com/checked.png)

# View é¡µé¢
```php

<?= GridView::widget([

    // ------ğŸ‘‡ä¸‹é¢è¿™å¨-----
    "options" => ["class" => "grid-view","style"=>"overflow:auto", "id" => "grid"],// è¿™ä¸ªidå¾ˆé‡è¦
    // ------ğŸ‘†ä¸Šé¢è¿™å¨------

    'dataProvider' => $dataProvider,
    'hover'=>true,
    'floatHeader'=>true,
    'floatHeaderOptions'=>['scrollingTop'=>'0','class'=>'col-sm-3'],
    'filterModel' => $searchModel,
    'columns' => [
        // ------ğŸ‘‡ä¸‹é¢è¿™å¨-----
        [
         'class' => 'yii\grid\CheckboxColumn',//å¤šé€‰
         'name'  => 'id',
         'headerOptions' => ['width'=>'30'],
         'footer' => '<button href="#" class="btn btn-default btn-xs btn-delete"
                    url="'. Url::toRoute('admin/delete') .'">åˆ é™¤</button>',
         'footerOptions' => ['colspan' => 5],  //è®¾ç½®åˆ é™¤æŒ‰é’®å®åˆ—æ˜¾ç¤ºï¼›
        ],
        // ------ğŸ‘†ä¸Šé¢è¿™å¨------

        // ['class' => 'yii\grid\SerialColumn'],
        'id',
        'key',
        ],
        // ['class' => 'yii\grid\ActionColumn'],
    ],
]);
?>
//

<?php
// ------ğŸ‘‡ä¸‹é¢è¿™å¨-----
$this->registerJs('
$(".gridview").on("click", function () {
    var msg = "è¯·ç¡®è®¤æ‚¨çš„æ“ä½œï¼Ÿ\n\nè¯·é€‰æ‹©ï¼";
    if (confirm(msg)===true){
        var keys = $("#grid").yiiGridView("getSelectedRows");
        if (keys=="") {
            return confirm("è¯·å‹¾é€‰æ•°æ®!");
        }
        console.log(keys);
        $.post("ids?id="+keys);// æ§åˆ¶å™¨çš„æ–¹æ³•
    }else{
        console.log("ç”¨æˆ·å–æ¶ˆæ“ä½œ");
        return false;
    }
});
');
?>

// æŒ‰é’®
<?= Html::a('æ‰¹é‡é€šè¿‡', "javascript:void(0);", ['class' => 'btn btn-success gridview']) ?>
// ------ğŸ‘†ä¸Šé¢è¿™å¨------
```

# æ§åˆ¶å™¨
```php
public function actionIds($id)
{
    // ä¸šåŠ¡é€»è¾‘
}
```
-----------------------
`ä½†æ˜¯,ä¸Šé¢çš„ä¸å¤Ÿæ™ºèƒ½,æˆ‘æƒ³ä¼ é€’ä¸åŒçš„å‚æ•°(å‚æ•°ä¸ºæ§åˆ¶å™¨æ–¹æ³•)å®ç°ä¸åŒçš„æ§åˆ¶å™¨æ–¹æ³•`

`æŒ‰é’®:`

```html
<button class = 'btn btn-success gridview' type="button" onclick="dosr('suc');">æ‰¹é‡é€šè¿‡</button>
<button class = 'btn btn-success gridview' type="button" onclick="dosr('ref');">æ‰¹é‡æ‹’ç»</button>
```

```js
<script>
function dosr(action)
{
    if (action ==="suc") {
        var msg = "\n\nç¡®å®šæ‰¹é‡é€šè¿‡å—ï¼Ÿ";
    }
    if (action ==="ref") {
        var msg = "\n\nç¡®å®šæ‰¹é‡æ‹’ç»å—ï¼Ÿ";
    }
    if (confirm(msg)===true){
        var keys = $("#grid").yiiGridView("getSelectedRows");
        if (keys=="") {
            return confirm("è¯·é€‰æ‹©æ•°æ®!");
        }
        console.log(keys);
        $.post(action+"?id="+keys);
    }else{
        return false;
    }
}
</script>
```

# æ§åˆ¶å™¨

```php
// æ‰¹é‡é€šè¿‡
public function actionSuc($id)
{
    Yii::$app->myfun->record($id,'suceessss');
}
// æ‰¹é‡æ‹’ç»
public function actionRef($id)
{
    Yii::$app->myfun->record($id,'rerererererererere');
}
```
