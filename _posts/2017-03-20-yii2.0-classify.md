---
layout: post
category: ['Yii2.0']
title: Yii2.0 无限级分类列表
---
# 方法一: 递归实现
## 递归原理:
`递归: 调用程序自身的方法.`

**如:**
```php
function deep (&$i)
{
	echo $i;
	$i++;
	if($i < 10){
		deep($i);
	}
}
```
## eg:
数据如下:
| id | pid | name | order |
| --- | --- | --- | --- |
|  1  |  0  | 所属     |   0      |
|  2  |  0  | 所属类别  |   0      |
|  3  |  0  | 部门     |   0      |
|  4  |  0  | 职务     |   0      |
|  5  |  2  | A类业务员 |   0      |
|  6  |  2  | B类业务员 |   0      |
|  7  |  2  | C类业务员 |   0      |
|  8  |  3  | 拓展一部  |   0      |
|  9  |  3  | 拓展二部  |   0      |
|  10 |  3  | 拓展三部  |   0      |
|  11 |  4  | 业务员	   |   0      |
|  12 |  4  | 保险员	   |   0      |
|  13 |  1  | 公司类型  |   0      |
|  14 |  1  | 团队类型  |   0      |
|  15 |  13 | 保险公司  |   0      |
|  16 |  13 | 业务公司  |   0      |
|  17 |  14 | B团队    |    0     |
|  18 |  14 | A团队	   |   0     |
|  19 |  2  | E类业务员 |   0     |
|  21 |  2  | D类业务员 |   0     |



```php
    //获取数据
    public static function getData ()
    {

        return $data = Attributelist::find()->orderBy('order desc')->asArray()->all();
        // echo "<pre>";
        // print_r($data);
    }
    //生成树
    public function getTree ($data, $pid=0, $nu=0)
    {
        $bx = "|——";
        $nu++ ;
        if (!empty($data)) {
            foreach ($data as $v)
            {
                $dataid = $v['id'];
                $datapid = $v['pid'];
                $dataname = $v['name'];
                if ($datapid == $pid) {//
                    $this->tree[$dataid] =  str_repeat($bx, $nu).$dataname;
                    $this->getTree($data,$v['id'],$nu);
                }
            }
        }
    }
    public function tree()
    {
        $data = $this->getData();
        $this->getTree($data, 0, 0);
        return $this->tree;
    }
```


