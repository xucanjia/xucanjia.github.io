---
layout: post
category: ['Yii2.0']
title: Yii2.0 小技巧
---
# 输出sql语句:
```php
$query = Order::find()->where(['order_id'=>[1,2]])->select(['id']);
$commandQuery = clone $query;
echo $commandQuery->createCommand()->getRawSql();
exit;
```
# Yii2的Alert组件（弹窗提示信息)
该组件提供

**五种类型提示:**

`error，danger，success，info，warning`

**总的样式有四种:**

`alert-danger，lert-success，alert-info，alert-warning`


```php
// 单条消息：
\Yii::$app->getSession()->setFlash('error', 'This is the message');

\Yii::$app->getSession()->setFlash('danger', 'This is the message');

\Yii::$app->getSession()->setFlash('success', 'This is the message');

\Yii::$app->getSession()->setFlash('info', 'This is the message');

\Yii::$app->getSession()->setFlash('warning', 'This is the message');

// 多条消息：
\Yii::$app->getSession()->setFlash('error', ['Error 1', 'Error 2']);
```
## eg:
### 控制层:
```php
public function actionDelete($id)
{
    $model = new Attributelist();
    $child = $model->find()->where(['pid'=>$id])->asArray()->all();

    // ---------------若有子类 则不能删除-----------------------
    if (empty($child)){
        $this->findModel($id)->delete();
    }
    else{
        \Yii::$app->getSession()->setFlash('error', '该删除项有子类,不能删除!');
    }
    return $this->redirect(['index']);
}
```
### 视图层:

`先引入 Alert：use yii\bootstrap\Alert;`

```html
<div>
	<?php
	    if( Yii::$app->getSession()->hasFlash('error') ) {
	    echo Alert::widget([
	        'options' => [
	            'class' => 'alert-danger',
	        ],
	        'body' => Yii::$app->getSession()->getFlash('error'),
	    ]);
	}
	?>
</div>

```
`若出现两个提示框,去掉widget后面的参数`

**未完,待续~~**
