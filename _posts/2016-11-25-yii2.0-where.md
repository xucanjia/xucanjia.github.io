---
layout: post
category: ['Yii2.0']
title: Yii2.0 where查询条件组合
---

## 条件查询
$staffs = Staff::find()->where($where)->all();

### 1.简单查询:

`sql: (year = 1) AND (status = 2)`
```php
$where = ['year' => 1, 'status' => 2];
```

### 2. and 条件组合：

` sql: id=1 AND id=2`
```php
$where = ['and', 'id=1', 'id=2'];
```
`sql: year=1 AND (id=1 OR id=2)`
```php
$where = ['and', 'year=1', ['or', 'id=1', 'id=2']];
```
`sql: year=1 AND (id=1 OR id=2)`

`此写法'='可以换成其他操作符，例：in like != >=等`
```php
$where = [
    'and',
    ['=', 'year', 1],
    [
        'or',
        ['>=', 'id', '1'],
        ['=', 'id', '10'],
    ]
];
```
### 3. or 条件:

`sql: (year IN (7, 8, 9) OR (id IN (1, 2, 3)))`
```php
$where = ['or', ['year' => [7, 8, 9]], ['id' => [1, 2, 3]];
```

### 4. not条件:

`sql: NOT (attribute IS NULL)`
```php
$where = ['not', ['attribute' => null]];
```

### 5. between / not between 用法一样:


`sql: id BETWEEN 1 AND 10`
```php
$where = ['between', 'id', 1, 10]
```

### 6. in / not in 用法一样:

`sql: id IN (1, 2, 3)`
```php
$where = ['in', 'id', [1, 2, 3]] or $where = ['id'=>[1, 2, 3]];

//IN条件也适用于多字段

$where = ['in', ['id', 'name'], [['id' => 1, 'name' => 'foo'], ['id' => 2, 'name' => 'bar']]];

//也适用于内嵌sql:句

$where = ['in', 'user_id', (new Query())->select('id')->from('users')->where(['active' => 1])];
```
### 7. like:

`sql: name LIKE '%zsm%`
```php
$where = ['like', 'name', 'zsm'];

//sql:`name LIKE '%test%' AND name LIKE '%sample%'`

$where = ['like', 'name', ['test', 'sample']];

//sql:`name LIKE '%zsm'`

$where = ['like', 'name', '%zsm', false];
```
### 8. exists /  not exists 用法一样:


`sql: EXISTS (SELECT "id" FROM "users" WHERE "active"=1)`
```php
$where = ['exists', (new Query())->select('id')->from('users')->where(['active' => 1])];
```
### 9. 指定运算符:
`sql: id >= 10`

```php
$where = ['>=', 'id', 10];

//sql:`id != 10`
$where = ['!=', 'id', 10];
```


